<html lang="en">
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"> </script>
<title>Zombie Dice</title>
</head>
<body onload="document.getElementById('start_game').disabled = false">
<h1>Play Zombie Dice!</h1>

<div id="dice_roll">
0
</div>

<div id="TimesShot">
0
</div>

<div id="RoundScore">
0
</div>

<div id="IsDead">
0
</div>

<div id="TotalScore">
0
</div>


<div id="preset">
<input type="button" id="start_game" onclick="startGame()" value="Start Game" />

<input type="button" id="take_turn" onclick="takeTurn()" value="Take Turn" />

<input type="button" id="stop_turn" onclick="stopTurn()" value="Stop Turn" />

<input type="button" id="ai_turn" onclick="aiTurn()" value="AI Turn" />
</div>

<script type="text/javascript">
function startGame() {
    $.post("http://localhost:8000/zombie_dice/start_game?num_players=2&player1=Andrew&player1_ai=false&player2=random&player2_ai=true", "", function(data, status) {
                window.game_state_id = data;
                document.getElementById("start_game").disabled = true;
            });
}

function takeTurn() {
     $.post("http://localhost:8000/zombie_dice/take_turn?uuid=" + window.game_state_id + "&player=Andrew&continue=true", "", function(data, status) {
                parseTurnData(data)
            });
}

function stopTurn() {
    $.post("http://localhost:8000/zombie_dice/take_turn?uuid=" + window.game_state_id + "&player=Andrew&continue=false", "", function(data, status) {
            });
}

function aiTurn() {
     $.post("http://localhost:8000/zombie_dice/take_turn?uuid=" + window.game_state_id + "&player=random&continue=true", "", function(data, status) {
                parseTurnData(data)
            });
}

function parseTurnData(data) {
    var silly = '{"silly" : "vat", "hat": "bat"}';

    player_turn_result = JSON.parse(data)

    turn_result = player_turn_result["TurnResult"]

    var roll_1 = turn_result[0][1].fontcolor(turn_result[0][0]);
    var roll_2 = turn_result[1][1].fontcolor(turn_result[1][0]);
    var roll_3 = turn_result[2][1].fontcolor(turn_result[2][0]);

    turn_result_string = [roll_1, roll_2, roll_2].join("\t");

    temp = '{"TurnResult":[["yellow","walk"],["green","brain"],["green","brain"]],"RoundScore":2,"TimesShot":0,"TotalScore":0,"IsDead":false}';

    temp_2 = '[["yellow","walk"],["green","brain"],["green","brain"]]';
    temp_3 = '{"RoundScore": "a"}';


    var my_map = {};
    my_map["key1"] = "value1";
    my_map["key2"] = "value2";

    document.getElementById("dice_roll").innerHTML = turn_result_string;
    document.getElementById("TimesShot").innerHTML = "Times Shot : " + player_turn_result["TimesShot"];
    document.getElementById("RoundScore").innerHTML = "Round Score : " + player_turn_result["RoundScore"];
    document.getElementById("IsDead").innerHTML = "Is Dead? : " + player_turn_result["IsDead"];
    document.getElementById("TotalScore").innerHTML = "Total Score : " + player_turn_result["TotalScore"];

    //document.getElementById("dice_roll").innerHTML = JSON.stringify(JSON.parse(silly), null, 2);
    // document.getElementById("dice_roll").innerHTML = silly;
    
}
</script>

</body>
</html>
